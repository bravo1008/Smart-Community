<!--pages/submitProblems.wxml-->
<view class="container">
  <!-- 页面标题 -->
  <view class="header">
    <text class="title">报修问题反馈</text>
  </view>

  <!-- 标题输入框 -->
  <view class="input-section">
    <label>请输入报修标题</label>
    <textarea class="title-textarea" placeholder="请输入报修问题标题，限30字" maxlength="30" bindinput="onTitleInput" ></textarea>
  </view>

  <!-- 问题描述输入框 -->
  <view class="input-section">
    <label>请输入问题的详细描述</label>
    <textarea class="description-textarea" placeholder="请填写报修问题的详细描述，不超过400字" maxlength="400" bindinput="onDescriptionInput"></textarea>
  </view>

  <!-- 上传图片和视频 -->
  <view class="input-section">
    <label>照片/视频上传</label>
    <view class="upload-area" bindtap="chooseMedia">
      <view class="upload-placeholder">
        <image src="/images/upload-icon.png" class="upload-icon" />
        <text>支持 .jpg, .gif, .png, .mp4格式</text>
      </view>
    </view>
    <view class="media-preview">
      <block wx:for="{{mediaList}}" wx:key="index">
        <image wx:if="{{item.type === 'image'}}" src="{{item.tempFilePath}}" class="preview-image"/>
        <video wx:if="{{item.type === 'video'}}" src="{{item.tempFilePath}}" class="preview-video" controls></video>
      </block>
    </view>
  </view>

  <!-- 用户地理位置 -->
  <view class="input-section">
    <label>所在位置</label>
    <view class="location-section">
      <button class="location-button" bindtap="getLocation">一键定位</button>
      <input class="location-input" placeholder="请输入详细位置" bindinput="onAddressInput" value="{{address}}" />
    </view>
  </view>

  <!-- 联系方式 -->
  <view class="input-section">
    <label>联系方式</label>
    <view class="contact-section">
      <view class="contact-item">
        <label>手机号</label>
        <input class="phone-input" placeholder="请输入手机号" bindinput="onPhoneInput" />
      </view>
      <view class="contact-item">
        <label>邮箱</label>
        <input  class="email-input" placeholder="请输入邮箱" bindinput="onEmailInput" />
      </view>
      <view class="contact-item">
        <label>微信</label>
        <input class="wechat-input" placeholder="请输入微信号" bindinput="onWeChatInput" />
      </view>
    </view>
  </view>

  <!-- 同意隐私协议 -->
  <view class="input-section">
    <checkbox checked="{{privacyAgreed}}" bindchange="onPrivacyChange">同意<text class="link">《用户隐私协议》</text></checkbox>
  </view>

  <!-- 提交按钮 -->
  <button class="submit-button" bindtap="submitForm" disabled="{{!privacyAgreed}}">提交</button>
</view>
